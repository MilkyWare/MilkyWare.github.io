---
title: Recreating WCF Service in DotNet Core
header:
  image: '/images/recreating-wcf-service-in-dotnet-core/header.png'
category: Integration
tags:
  - WCF
  - DotNet Core
  - .NET Core
---

When Microsoft started codebase migration from .NET Framework to .NET Core (now simply .NET), a number of features were to remain on .NET Framework. One such feature was the **server-side** codebase of **WCF** preventing WCF from being hosted in a .NET Core app.

Although Microsoft have deprecated WCF, I have found quite of lot of legacy applications rely on WCF for integration. In an ideal world, the integration would be migrated to more modern **REST or GraphQL** endpoints and the consuming application updated. However, this is often not possible. Fortunately, the .NET community have revived WCF through **Core WCF**.

## What is [Core WCF](https://github.com/CoreWCF/CoreWCF)?

Core WCF **"is a port of the service side of Windows Communication Foundation (WCF) to .NET Core"**. This adds the capability of hosting a WCF endpoint in an **ASPNET Core** application along with its **[many benefits](https://learn.microsoft.com/en-us/aspnet/core/fundamentals/choose-aspnet-framework?view=aspnetcore-8.0#aspnet-core)**.

## Creating the WCF Endpoint

The Core WCF project provides a **[comprehensive walkthrough](https://github.com/CoreWCF/CoreWCF/blob/main/Documentation/Walkthrough.md)** of creating a new WCF service and endpoint from scratch, however, this post will focus on the scenario of migrating an **existing WCF definition** to a Core WCF application.

### Generating the Service Contract

To generate **WCF proxy clients**, Microsoft provide **[dotnet-svcutil](https://learn.microsoft.com/en-us/dotnet/core/additional-tools/dotnet-svcutil-guide?tabs=dotnetsvcutil2x)** which can generate the relevant C# objects from a WSDL file or endpoint. To install this tool run the below command:

``` powershell
dotnet tool install dotnet-svcutil --global --version "2.2.0-preview1.23462.5"
```

Notice that a preview version of the tool has been specified. At the time of writing, the current stable version does not include an argument we need which is `--serviceContract`. This argument skips the generation of the client as it's not needed for us to host the WCF service. The next command will then generate the **ServiceContract**:

``` powershell
dotnet svcutil .\path\to\wsdl.wsdl --namespace "*,Namespace.To.Use" --outputDir .\path\to\output\cs\ --serviceContract --noLogo
```

The command will then output a **Reference.cs** in the path specified similar to below:

``` cs
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Namespace.To.Use
{
    [System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.Tools.ServiceModel.Svcutil", "2.2.0-preview1.23462.5")]
    [System.ServiceModel.ServiceContractAttribute(Namespace="http://sample.xmlns.com", ConfigurationName="WcfService")]
    public interface WcfService
    {
        
        [System.ServiceModel.OperationContractAttribute(Action="MyOperation", ReplyAction="*")]
        [System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]
        System.Threading.Tasks.Task<myOperationResponse> myOperationAsync(myOperationRequest request);

        ...
    }

    ...
}
```



### Cleaning up the code

## Sum up
